---
title: "Sync ToD to Readme"
description: "Extract all TODO items from .py files in lexicographical file order, update them into README.md."
mode: wide
---

<Card>
<div className="tools-container">
<div className="mcp-servers-container">
<div className="mcp-servers-title">
MCP Servers
</div>
<div className="mcp-servers-grid">
<div className="mcp-server-item">
<svg width="20" height="20" viewBox="0 0 24 24" style={{margin: 0, padding: 0, display: 'inline-block'}}><path fill="#F05032" d="M23.546 10.93L13.067.452c-.604-.603-1.582-.603-2.188 0L8.708 2.627l2.76 2.76c.645-.215 1.379-.07 1.889.441.516.515.658 1.258.438 1.9l2.658 2.66c.645-.223 1.387-.078 1.9.435.721.72.721 1.884 0 2.604-.719.719-1.881.719-2.6 0-.539-.541-.674-1.337-.404-1.996L12.86 8.955v6.525c.176.086.342.203.488.348.713.721.713 1.883 0 2.6-.719.721-1.889.721-2.609 0-.719-.719-.719-1.879 0-2.598.182-.18.387-.316.605-.406V8.835c-.218-.091-.423-.222-.6-.401-.545-.545-.676-1.342-.396-2.009L7.636 3.7.45 10.881c-.6.605-.6 1.584 0 2.189l10.48 10.477c.604.604 1.582.604 2.186 0l10.43-10.43c.605-.603.605-1.582 0-2.187"/></svg>
<span className="mcp-server-name">git</span>
</div>
<div className="mcp-server-item">
<svg width="20" height="20" viewBox="0 0 24 24" style={{margin: 0, padding: 0, display: 'inline-block'}}><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
<span className="mcp-server-name">github</span>
</div>
</div>
</div>
<div className="local-tools-container">
<div className="mcp-servers-title">
Local Tools
</div>
<div className="local-tools-grid">
<div className="local-tool-item">
<svg width="20px" height="20px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" id="Layer_1" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style={{margin: 0, padding: 0, display: 'inline-block'}}><g><g><rect clip-rule="evenodd" fill="#F2F2F2" fill-rule="evenodd" height="83.437" width="67.025" x="9.012" y="7.604"/><path d="M77.454,92.458H7.595V6.187h69.859V92.458z M10.429,89.624H74.62V9.021H10.429V89.624z"/></g><g><rect clip-rule="evenodd" fill="#FF7C24" fill-rule="evenodd" height="10.481" width="17.952" x="46.695" y="34.866"/></g><g><rect height="2.834" width="19.463" x="20.504" y="35.575"/></g><g><rect height="2.834" width="15.561" x="20.718" y="42.508"/></g><g><rect height="2.833" width="15.562" x="20.813" y="49.514"/></g><g><rect height="2.833" width="27.128" x="20.718" y="56.753"/></g><g><rect height="2.833" width="23.51" x="20.718" y="63.688"/></g><g><rect clip-rule="evenodd" fill="#39B6CC" fill-rule="evenodd" height="9.004" width="44.095" x="20.553" y="19.064"/></g><g><rect height="2.833" width="26.272" x="20.718" y="70.32"/></g><g><rect height="2.834" width="32.8" x="20.718" y="77.253"/></g><g><rect height="2.834" width="3.235" x="38.304" y="42.508"/></g><g><path clip-rule="evenodd" d="M77.931,71.902l4.287,4.427l-6.644,6.437l-4.309-4.457    C74.147,76.998,76.504,74.726,77.931,71.902L77.931,71.902z" fill="#F2F2F2" fill-rule="evenodd"/><path d="M75.542,84.77l-6.692-6.92l1.828-0.831c2.579-1.174,4.706-3.218,5.989-5.756l0.897-1.776l6.656,6.874L75.542,84.77z     M73.584,78.669l2.023,2.091l4.605-4.463l-2.007-2.074C76.994,76.012,75.414,77.531,73.584,78.669z"/></g><g><polygon clip-rule="evenodd" fill="#39B6CC" fill-rule="evenodd" points="83.267,75.319 91.984,84.338 83.247,92.779     74.535,83.761   "/><path d="M83.213,94.783L72.531,83.726l10.771-10.41l10.687,11.056L83.213,94.783z M76.538,83.794l6.744,6.981l6.698-6.472    l-6.748-6.981L76.538,83.794z"/></g><g><path clip-rule="evenodd" d="M66.124,50.799c7.742,0,14.018,6.276,14.018,14.019    s-6.275,14.019-14.018,14.019c-7.743,0-14.019-6.276-14.019-14.019S58.381,50.799,66.124,50.799L66.124,50.799z" fill="#F2F2F2" fill-rule="evenodd"/><path d="M66.124,80.253c-8.511,0-15.435-6.924-15.435-15.435s6.924-15.435,15.435-15.435S81.56,56.307,81.56,64.818    S74.635,80.253,66.124,80.253z M66.124,52.216c-6.949,0-12.601,5.653-12.601,12.602s5.651,12.601,12.601,12.601    c6.948,0,12.602-5.652,12.602-12.601S73.072,52.216,66.124,52.216z"/></g><g><rect height="2.833" width="10.313" x="39.902" y="49.514"/></g><g><path d="M76.404,65.586H73.57c0-0.636-0.068-1.255-0.205-1.84c-0.043-0.186-0.096-0.385-0.169-0.63l2.717-0.808    c0.091,0.304,0.158,0.559,0.215,0.801C76.31,63.901,76.404,64.735,76.404,65.586z M72.438,61.433    c-1.489-2.5-4.203-4.058-7.084-4.061l0.004-2.834c3.871,0.005,7.518,2.091,9.516,5.445L72.438,61.433z"/></g></g></svg>
<span className="local-tool-name">history</span>
</div>
<div className="local-tool-item">
<svg width="20px" height="20px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" style={{margin: 0, padding: 0, display: 'inline-block'}}><path d="M861.588238 240.133873v-65.792823c0-36.191275-29.439775-65.631049-65.631049-65.63105h-21.877358c-36.191275 0-65.631049 29.439775-65.631049 65.63105v65.631049H314.659414v-65.631049c0-36.191275-29.439775-65.631049-65.631049-65.63105h-21.877358c-36.191275 0-65.631049 29.439775-65.631049 65.63105v65.792823c-36.317212 0.868255-65.631049 30.539428-65.63105 67.061417v543.745565c0 37.06772 30.155471 67.223191 67.223191 67.223191h696.886045c37.06772 0 67.223191-30.155471 67.223191-67.223191V307.19529c-0.001024-36.52199-29.315885-66.193162-65.633097-67.061417z m-109.385765-65.792823c0-12.060345 9.817012-21.877358 21.877358-21.877358h21.877358c12.060345 0 21.877358 9.817012 21.877358 21.877358v175.016814c0 12.060345-9.817012 21.877358-21.877358 21.877358h-21.877358c-12.060345 0-21.877358-9.817012-21.877358-21.877358V174.34105z m-546.928824 0c0-12.060345 9.817012-21.877358 21.877358-21.877358h21.877358c12.060345 0 21.877358 9.817012 21.877358 21.877358v175.016814c0 12.060345-9.817012 21.877358-21.877358 21.877358h-21.877358c-12.060345 0-21.877358-9.817012-21.877358-21.877358V174.34105z m678.191947 676.600829c0 12.935767-10.532708 23.468476-23.468476 23.468475H163.111076c-12.935767 0-23.468476-10.532708-23.468476-23.468475V307.19529c0-12.402323 9.677764-22.593054 21.877358-23.415233v65.577807c0 36.191275 29.439775 65.631049 65.631049 65.631049h21.877358c36.191275 0 65.631049-29.439775 65.631049-65.631049v-65.631049h393.789368v65.631049c0 36.191275 29.439775 65.631049 65.631049 65.631049h21.877358c36.191275 0 65.631049-29.439775 65.631049-65.631049v-65.577807c12.19857 0.82218 21.877358 11.012911 21.877358 23.415233v543.746589z" fill="#22C67F" /><path d="M706.719439 478.272194l-48.01715-44.741741-182.28128 195.621482-111.468348-122.615387-48.563905 44.148911 159.469116 172.685427z" fill="#74E8AE" /></svg>
<span className="local-tool-name">claim_done</span>
</div>
<div className="local-tool-item">
<svg width="20px" height="20px" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg" style={{margin: 0, padding: 0, display: 'inline-block'}}><path fillRule="evenodd" clipRule="evenodd" d="M13.0164 2C10.8193 2 9.03825 3.72453 9.03825 5.85185V8.51852H15.9235V9.25926H5.97814C3.78107 9.25926 2 10.9838 2 13.1111L2 18.8889C2 21.0162 3.78107 22.7407 5.97814 22.7407H8.27322V19.4815C8.27322 17.3542 10.0543 15.6296 12.2514 15.6296H19.5956C21.4547 15.6296 22.9617 14.1704 22.9617 12.3704V5.85185C22.9617 3.72453 21.1807 2 18.9836 2H13.0164ZM12.0984 6.74074C12.8589 6.74074 13.4754 6.14378 13.4754 5.40741C13.4754 4.67103 12.8589 4.07407 12.0984 4.07407C11.3378 4.07407 10.7213 4.67103 10.7213 5.40741C10.7213 6.14378 11.3378 6.74074 12.0984 6.74074Z" fill="#327EBD"/><path fillRule="evenodd" clipRule="evenodd" d="M18.9834 30C21.1805 30 22.9616 28.2755 22.9616 26.1482V23.4815L16.0763 23.4815L16.0763 22.7408L26.0217 22.7408C28.2188 22.7408 29.9998 21.0162 29.9998 18.8889V13.1111C29.9998 10.9838 28.2188 9.25928 26.0217 9.25928L23.7266 9.25928V12.5185C23.7266 14.6459 21.9455 16.3704 19.7485 16.3704L12.4042 16.3704C10.5451 16.3704 9.03809 17.8296 9.03809 19.6296L9.03809 26.1482C9.03809 28.2755 10.8192 30 13.0162 30H18.9834ZM19.9015 25.2593C19.1409 25.2593 18.5244 25.8562 18.5244 26.5926C18.5244 27.329 19.1409 27.9259 19.9015 27.9259C20.662 27.9259 21.2785 27.329 21.2785 26.5926C21.2785 25.8562 20.662 25.2593 19.9015 25.2593Z" fill="#FFDA4B"/></svg>
<span className="local-tool-name">python_execute</span>
</div>
<div className="local-tool-item">
<Icon icon="bars-progress" size={20} color="#4286f6" />
<span className="local-tool-name">manage_context</span>
</div>
<div className="local-tool-item">
<Icon icon="filter-list" size={20} color="#4286f6" />
<span className="local-tool-name">handle_overlong_tool_outputs</span>
</div>
</div>
</div>
</div>
</Card>









## Instruction

In branch dev of **my** LUFFY repo, I have written some new code that I have implemented based on TODO. Please search all .py files and extract the complete TODO project information, and update the TODO section, i.e. remove the done ones and add the new ones, accordingly following the existing format (file path lexicographical order takes precedence, and line numbers within the same file must increase). Please keep the original section title "### üìù Complete TODO List" unchanged in the whole process. After you do this, please update the readme file on the remote repo. If necessary, you can use the github token under `.github_token`.

## Initial State

### Github Repo

<div className="file-tree">
‚îú‚îÄ‚îÄ <a href="https://github.com/zhaochen0110/LUFFY/">LUFFY Development Repository</a>
</div>

## Model Trajectory

<AccordionGroup>
<Accordion title="gpt-5">

<Columns cols={3}>
<Card title="Task Completion" icon="x">
Failed
</Card>
<Card title="Tool Calls" icon="wrench">
4
</Card>
<Card title="Turns" icon="arrows-rotate">
5
</Card>
</Columns>

<div className="result-box">
<svg width="14" height="14" viewBox="0 0 24 24" style={{margin: 0, padding: 0, display: 'inline-block'}}><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg> `github get_me`

<Expandable title="Details">
```json arguments
{}

```

```json output_result
{"login":"mcptest-user","id":215444510,"profile_url":"https://github.com/mcptest-user","avatar_url":"https://avatars.githubusercontent.com/u/215444510?v=4","details":{"email":"mcptest0606@gmail.com","bio":"I am a post graduate student in ABC University.","public_repos":8,"public_gists":17,"followers":0,"following":0,"created_at":"2025-06-09T02:45:56Z","updated_at":"2025-09-29T15:04:38Z","private_gists":40}}
```

</Expandable>
</div>

<div className="result-box">
<svg width="14" height="14" viewBox="0 0 24 24" style={{margin: 0, padding: 0, display: 'inline-block'}}><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg> `github get_file_contents`

<Expandable title="Details">
```json arguments
{
	"owner":"mcptest-user",
	"path":"/",
	"ref":"refs/heads/dev",
	"repo":"LUFFY",
	"sha":""
}

```

```json output_result
access to personal repository 'mcptest-user/LUFFY' is not allowed by GITHUB_ALLOWED_REPOS configuration
```

</Expandable>
</div>

<div className="result-box">
<svg width="14" height="14" viewBox="0 0 24 24" style={{margin: 0, padding: 0, display: 'inline-block'}}><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg> `github get_file_contents`

<Expandable title="Details">
```python
import os
base = "/workspace/dumps/workspace"
matches = []
for root, dirs, files in os.walk(base):
    if ".git" in dirs:
        repo_name = os.path.basename(root)
        if repo_name.lower() == "luffy":
            matches.append(root)
    # limit depth to avoid huge walks; but continue
print("FOUND", matches)
print("TOPDIRS", os.listdir(base))
 code
```

```json output_result
=== STDOUT ===
FOUND []
TOPDIRS ['.python_tmp', '.github_token']
=== EXECUTION INFO ===
Return code: 0
Execution time: 0.044 seconds
Timeout limit: 120 seconds
```

</Expandable>
</div>

<div className="result-box">
<svg width="14" height="14" viewBox="0 0 24 24" style={{margin: 0, padding: 0, display: 'inline-block'}}><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg> `github get_file_contents`

<Expandable title="Details">
```python
import os, sys, base64, json, re
import requests

BASE = "/workspace/dumps/workspace"
TOKEN_PATH = os.path.join(BASE, ".github_token")

def read_token():
    try:
        with open(TOKEN_PATH, 'r') as f:
            return f.read().strip()
    except Exception as e:
        print("ERR token", e)
        return None

token = read_token()
owner = "mcptest-user"
repo = "LUFFY"
branch = "dev"
headers = {"Accept":"application/vnd.github+json"}
if token:
    headers["Authorization"] = f"Bearer {token}"
headers["X-GitHub-Api-Version"] = "2022-11-28"
api = "https://api.github.com"

# get branch SHA
resp = requests.get(f"{api}/repos/{owner}/{repo}/branches/{branch}", headers=headers)
print("BRANCH_STATUS", resp.status_code)
print("BRANCH_BODY", resp.text[:500])
if resp.status_code != 200:
    sys.exit(0)
branch_data = resp.json()
sha = branch_data["commit"]["sha"]

# get tree
resp = requests.get(f"{api}/repos/{owner}/{repo}/git/trees/{sha}?recursive=1", headers=headers)
print("TREE_STATUS", resp.status_code)
if resp.status_code != 200:
    print(resp.text)
    sys.exit(0)
paths = [e["path"] for e in resp.json().get("tree", []) if e.get("type") == "blob"]
py_files = sorted([p for p in paths if p.lower().endswith('.py')])
print("PY_COUNT", len(py_files))
print("SAMPLE_PY", py_files[:10])

# fetch README file in root (search README.md or README.MD etc.)
readme_candidates = [p for p in paths if p.upper().startswith("README")]
# Prefer README.md
readme_path = None
for name in ["README.md","Readme.md","README.MD","README","readme.md","readme"]:
    if name in paths:
        readme_path = name
        break
if not readme_path and readme_candidates:
    readme_path = sorted(readme_candidates)[0]
print("README_PATH", readme_path)
if not readme_path:
    sys.exit(0)

# get README content
resp = requests.get(f"{api}/repos/{owner}/{repo}/contents/{readme_path}?ref={branch}", headers=headers)
print("README_STATUS", resp.status_code)
if resp.status_code != 200:
    print(resp.text)
    sys.exit(0)
readme_json = resp.json()
readme_content = base64.b64decode(readme_json['content']).decode('utf-8', errors='replace')
print("README_HEAD", readme_content[:500])

# function to find TODOs in .py files

def extract_todos_from_content(text):
    todos = []
    # For simplicity: match lines with TODO or FIXME preceded by comment markers
    # We capture the todo text after TODO[: -]
    for i, line in enumerate(text.splitlines(), start=1):
        if "TODO" in line:
            # Consider Python comments only: lines containing '#' before TODO or starting with triple quotes doc, but we'll allow any
            idx = line.find("TODO")
            todo_text = line[idx+4:].strip(" :#-\t")
            if todo_text == "":
                todo_text = line.strip()
            todos.append((i, todo_text))
    return todos

# collect todos
all_todos = []
for path in py_files:
    r = requests.get(f"{api}/repos/{owner}/{repo}/contents/{path}?ref={branch}", headers=headers)
    if r.status_code != 200:
        continue
    j = r.json()
    try:
        content = base64.b64decode(j['content']).decode('utf-8', errors='replace')
    except Exception:
        continue
    file_todos = extract_todos_from_content(content)
    if file_todos:
        for ln, txt in file_todos:
            all_todos.append({"path": path, "line": ln, "text": txt})

# sort as required: path lexicographically, then line number increasing
all_todos.sort(key=lambda x: (x['path'].lower(), x['line']))
print("TODO_COUNT", len(all_todos))
print("TODO_SAMPLE", all_todos[:5])

# Parse existing TODO section format
md = readme_content
section_title = "### üìù Complete TODO List"
start_idx = md.find(section_title)
print("HAS_SECTION", start_idx != -1)
if start_idx == -1:
    sys.exit(0)
# find end of section: next heading at same or higher level (###, ##, #) after start_idx+len(section_title)
rest = md[start_idx+len(section_title):]
# split to find next heading
m = re.search(r"\n#{1,3} \S", rest)
end_idx = start_idx + len(section_title) + (m.start() if m else len(rest))
section = md[start_idx:end_idx]

# Analyze list item format lines following the title
section_lines = section.splitlines()
# Remove the title line
content_lines = section_lines[1:]
# Determine bullet prefix and pattern by finding first line that references a .py:line pattern
item_pattern = None
bullet_prefix = "- [ ] "
use_checkbox = True
sep_between = " - "
wrap_path = False
# find example line
example_line = None
for line in content_lines:
    if ".py" in line and re.search(r":(\d+)", line):
        example_line = line
        break
if example_line:
    # detect checkbox
    if re.match(r"\s*[-*] \[.\] ", example_line):
        use_checkbox = True
        bullet_prefix = re.match(r"\s*[-*] \[.\] ", example_line).group(0)
    elif re.match(r"\s*[-*] ", example_line):
        use_checkbox = False
        bullet_prefix = re.match(r"\s*[-*] ", example_line).group(0)
    elif re.match(r"\s*\d+[.)] ", example_line):
        use_checkbox = False
        bullet_prefix = re.match(r"\s*\d+[.)] ", example_line).group(0)
    # detect path wrapper like [] around path
    wrap_path = "[" in example_line.split(":",1)[0] and "]" in example_line.split(":",1)[0]
    # detect separator between path:line and text
    after = re.split(r"\.py:\d+\]?", example_line, maxsplit=1)
    if len(after) > 1:
        tail = after[1]
        m2 = re.match(r"\s*([-‚Äì‚Äî:]|-)\s*", tail)
        if m2:
            sep_between = f" {m2.group(1).strip()} "
        else:
            sep_between = " - "

# Build new section content lines from extracted todos
items = []
for t in all_todos:
    p = t['path']
    l = t['line']
    txt = t['text']
    path_repr = f"{p}:{l}"
    if wrap_path:
        path_repr = f"[{path_repr}]"
    item = f"{bullet_prefix}{path_repr}{sep_between}{txt}" if bullet_prefix.strip() else f"- {path_repr}{sep_between}{txt}"
    items.append(item)

new_section = section_title + "\n" + ("\n".join(items) if items else "(none)")

# Compose new README
new_md = md[:start_idx] + new_section + md[end_idx:]

# If no change, print noop
changed = new_md != md
print("CHANGED", changed)

# If changed, update README via API
if changed:
    import hashlib
    content_b64 = base64.b64encode(new_md.encode('utf-8')).decode('ascii')
    put_body = {
        "message": "docs: update Complete TODO List from codebase",
        "content": content_b64,
        "sha": readme_json['sha'],
        "branch": branch
    }
    resp = requests.put(f"{api}/repos/{owner}/{repo}/contents/{readme_path}", headers=headers, data=json.dumps(put_body))
    print("PUT_STATUS", resp.status_code)
    print("PUT_BODY", resp.text[:500])
else:
    print("NO_UPDATE_NEEDED")
 code
```

```json output_result
=== STDOUT ===
BRANCH_STATUS 200
BRANCH_BODY {"name":"dev","commit":{"sha":"7463fefd0f55ae2ba0b919e06527588022893495","node_id":"C_kwDOQD9M1toAKDc0NjNmZWZkMGY1NWFlMmJhMGI5MTllMDY1Mjc1ODgwMjI4OTM0OTU","commit":{"author":{"name":"zhaochen0110","email":"zhaochen0110@users.noreply.github.com","date":"2025-08-03T03:29:59Z"},"committer":{"name":"zhaochen0110","email":"zhaochen0110@users.noreply.github.com","date":"2025-08-03T03:29:59Z"},"message":"feat: Implement partial TODO items on dev branch\n\n- ‚úÖ Implement fold_batch_dim and unfold_batch_d
TREE_STATUS 200
PY_COUNT 233
SAMPLE_PY ['data/prepare_sft.py', 'data/prepare_train.py', 'data/prepare_train_sft_rl.py', 'eval_scripts/collect_results.py', 'eval_scripts/generate_vllm.py', 'eval_scripts/oat_math_grader.py', 'luffy/deepscaler/__init__.py', 'luffy/deepscaler/globals.py', 'luffy/deepscaler/rewards/__init__.py', 'luffy/deepscaler/rewards/math_reward.py']
README_PATH README.md
README_STATUS 200
README_HEAD # LUFFY Development Repository

> üöß **Development Branch** - This is the main development repository for LUFFY (Learning to Reason Under Off‚ÄëPolicy Guidance)

## About LUFFY

LUFFY is a reinforcement learning framework that bridges the gap between zero-RL and imitation learning by incorporating off-policy reasoning traces into the training process. This repository contains the core implementation and development work.

## üîß Development Status

This repository is under active development. Many fe
TODO_COUNT 255
TODO_SAMPLE [{'path': 'luffy/deepscaler/utils.py', 'line': 45, 'text': 'Add logging for API calls and errors'}, {'path': 'luffy/deepscaler/utils.py', 'line': 46, 'text': 'Support batch processing for multiple prompts'}, {'path': 'luffy/deepscaler/utils.py', 'line': 47, 'text': 'Add timeout configuration for API calls'}, {'path': 'luffy/deepscaler/utils.py', 'line': 107, 'text': 'Implement Vertex AI initialization and authentication'}, {'path': 'luffy/deepscaler/utils.py', 'line': 108, 'text': 'Configure safety settings for content generation'}]
HAS_SECTION True
CHANGED True
PUT_STATUS 200
PUT_BODY {"content":{"name":"README.md","path":"README.md","sha":"6508e41608cb7f64755d520a4732d7c7e32500fb","size":31629,"url":"https://api.github.com/repos/mcptest-user/LUFFY/contents/README.md?ref=dev","html_url":"https://github.com/mcptest-user/LUFFY/blob/dev/README.md","git_url":"https://api.github.com/repos/mcptest-user/LUFFY/git/blobs/6508e41608cb7f64755d520a4732d7c7e32500fb","download_url":"https://raw.githubusercontent.com/mcptest-user/LUFFY/dev/README.md","type":"file","_links":{"self":"https://
=== EXECUTION INFO ===
Return code: 0
Execution time: 26.631 seconds
Timeout limit: 120 seconds
```

</Expandable>
</div>

<div className="thinking-box">
üßê`Agent`

Done.

What I did:
- Used the token in .github_token to access your LUFFY repository‚Äôs dev branch.
- Scanned all Python files in the branch (233 .py files).
- Extracted every current TODO from code comments, then regenerated the ‚Äú### üìù Complete TODO List‚Äù section:
  - Removed items that no longer appear in code (i.e., implemented/done).
  - Added all new TODOs discovered in the code.
  - Kept the original section title unchanged.
  - Preserved the section‚Äôs bullet formatting style heuristically based on the existing list.
  - Sorted entries by file path (lexicographically) and, within a file, by increasing line number.
  - Used the format path:line - todo text for each item.
- Updated the README.md on the remote repo (dev branch) with commit message:
  - docs: update Complete TODO List from codebase

Quick stats:
- Python files scanned: 233
- TODO items now listed: 255

You can review the updated section in README on dev:
- https://github.com/mcptest-user/LUFFY/blob/dev/README.md

If you want me to tweak the item formatting further (e.g., checkbox style, separators), I can adjust it to exactly match any desired style.
</div>

</Accordion>

</AccordionGroup>
